{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:recommended",
    "docker:enableMajor",
    "docker:pinDigests",
    "helpers:pinGitHubActionDigests",
    ":semanticCommitTypeAll(chore)",
  ],
  customManagers: [
    {
      customType: "regex",
      description: "Process annotated dependencies",
      managerFilePatterns: [
        "/\\.env(?:\\.j2)?$/",
        "/\\.sh(?:\\.j2)?$/",
        "/\\.yaml(?:\\.j2)?$/",
      ],
      matchStrings: [
        // # renovate: datasource=github-releases depName=foo/bar
        // foobar_version: v1.0.0
        // # renovate: datasource=docker depName=ghcr.io/foo/bar
        // FOOBAR_VERSION=v1.0.0
        "datasource=(?<datasource>\\S+) depName=(?<depName>\\S+)\\n.+(:\\s|=)(&\\S+\\s)?(?<currentValue>\\S+)",
      ],
      datasourceTemplate: "{{#if datasource}}{{{datasource}}}{{else}}github-releases{{/if}}",
    },
  ],
  labels: ["dependencies"],
  packageRules: [
    {
      matchDepTypes: ["dependencies"],
      description: "Only major version updated will be marked as fix",
      major: {
        semanticCommitType: "fix",
      },
    },
    {
      matchDatasources: ["docker"],
      description: "Monthly updates for docker dependencies",
      schedule: ["* * * * 0,6"],
    },
  ],
  rebaseWhen: "conflicted",
  semanticCommits: "enabled",
  timezone: "Australia/Brisbane",
}
