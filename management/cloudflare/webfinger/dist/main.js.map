{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourceRoot": "dist",
  "sourcesContent": ["type JRD = {\n  subject: string\n  links: {\n    rel: string\n    href: string\n  }[]\n}\n\nexport default {\n  async fetch(request: Request, env: Record<string, string>): Promise<Response> {\n    const url = new URL(request.url)\n    if (url.pathname !== '/.well-known/webfinger') {\n      return new Response('Not found', { status: 404 })\n    }\n\n    const resource = url.searchParams.get('resource')\n    if (!resource) {\n      return new Response('Bad request', { status: 400 })\n    }\n\n    const resourceEnvKey = resource.replace(/[:/@]/g, '_').toUpperCase()\n    const rawJRD = env[resourceEnvKey]\n    if (!rawJRD) {\n      return new Response('Not found', { status: 404 })\n    }\n    const jrd: JRD = JSON.parse(rawJRD)\n\n    const searchParamRels = url.searchParams.getAll('rel')\n    const rels =\n      searchParamRels.length > 0 ? searchParamRels : ['http://openid.net/specs/connect/1.0/issuer']\n\n    return Response.json({\n      subject: jrd.subject,\n      links: jrd.links.filter((link) => rels.includes(link.rel)),\n    })\n  },\n}\n"],
  "mappings": ";AAQA,IAAO,eAAQ;AAAA,EACb,MAAM,MAAM,SAAkB,KAAgD;AAC5E,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,QAAI,IAAI,aAAa,0BAA0B;AAC7C,aAAO,IAAI,SAAS,aAAa,EAAE,QAAQ,IAAI,CAAC;AAAA,IAClD;AAEA,UAAM,WAAW,IAAI,aAAa,IAAI,UAAU;AAChD,QAAI,CAAC,UAAU;AACb,aAAO,IAAI,SAAS,eAAe,EAAE,QAAQ,IAAI,CAAC;AAAA,IACpD;AAEA,UAAM,iBAAiB,SAAS,QAAQ,UAAU,GAAG,EAAE,YAAY;AACnE,UAAM,SAAS,IAAI,cAAc;AACjC,QAAI,CAAC,QAAQ;AACX,aAAO,IAAI,SAAS,aAAa,EAAE,QAAQ,IAAI,CAAC;AAAA,IAClD;AACA,UAAM,MAAW,KAAK,MAAM,MAAM;AAElC,UAAM,kBAAkB,IAAI,aAAa,OAAO,KAAK;AACrD,UAAM,OACJ,gBAAgB,SAAS,IAAI,kBAAkB,CAAC,4CAA4C;AAE9F,WAAO,SAAS,KAAK;AAAA,MACnB,SAAS,IAAI;AAAA,MACb,OAAO,IAAI,MAAM,OAAO,CAAC,SAAS,KAAK,SAAS,KAAK,GAAG,CAAC;AAAA,IAC3D,CAAC;AAAA,EACH;AACF;",
  "names": []
}
